{% extends 'base.html' %} {% block content %}


<!-- ************** Jumbotron ********************* -->

<div class="container-fluid callout-container">
    <div class="row">
        <div class="col-12">
            <section class="callout jumbotron text-center py-0 pt-md-2">
                <h1>Landscape Photography Locations</h1>
                <h2 class="d-none d-md-inline">Find stunning photo locations </h2>
                <p class="lead py-0 py-md-5">
                    <span>near you, or when on holidays...</span>
                    <br>
                    <span class="d-none d-md-inline"> ... or get inspiration for your next trip</span>
                </p>
            </section>
            <section class="callout jumbotron text-center py-0 pt-md-2">
                <h4 class='counter'>Already {{counter}} locations in our database!</h4>
            </section>
        </div>
    </div>

</div>
<!-- *************** /. Jumbotron ********************* -->

<!-- ********************* MAP ********************* -->

<div class="container map-container d-none d-md-block">
    <section>
        <div class="row">
            <div class="col-12">
                <div class="section-title mt-5 mb-3 text-center">
                    <h2>Find a location on the Map</h2>
                </div>
            </div>
        </div>

    </section>
    <div>
        <div id="map"></div>
    </div>
</div>


<!-- ******************** /. MAP ********************* -->

<!-- *************** Further Instructions ********************* -->

<div class="container-fluid callout-container">
    <section class="callout jumbotron text-center py-0 pt-md-2">
        <div class="row">
            <h2 class="section-title">Further information comes here</h2>
            <div class="row">
                <div class="col-12 instructions-box">
                </div>
            </div>
        </div>
    </section>
</div>

<!-- *************** /. Instructions  ********************* -->


<script>
    const usp = new URLSearchParams();
    usp.set('selected_country', 'Gruzia');
    var newString = "{{url_for('filtering', search_param = ".concat("'?", usp.toString(), "')}}");
    console.log(newString);
</script>

<script>
    //receiving the location coordinates from the route function >> map.js is handling the Google map API markers
    var data_source = {{ data_source | tojson }};

/*    console.log(data_source);

    for (var k = 0; k < data_source.length; k++) {
        console.log("---------------");
        console.log(data_source[k]);
    }*/
</script>

<script>
    function initMap() {

        var map = new google.maps.Map(document.getElementById('map'), {
            zoom: 3,
            center: { lat: 35, lng: 0 }
        });

        // Create an array of alphabetical characters used to label the markers.
        var labels = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        var locations = data_source;
        console.log(locations);

        // Add some markers to the map.
        // Note: The code uses the JavaScript Array.prototype.map() method to
        // create an array of markers based on a given "locations" array.
        // The map() method here has nothing to do with the Google Maps API.
        var markers = locations.map(function(location, i) {
            return new google.maps.Marker({
                position: location,
                label: labels[i % labels.length]
            });
        });

        // Add a marker clusterer to manage the markers.
        var markerCluster = new MarkerClusterer(map, markers, { imagePath: 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m' });
    }
</script>

<!--<script type="text/javascript" src="static/js/map.js"></script>-->

<script src="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js"></script>

<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCh5hquqnIYsTyfmzkJds-warsV1FJ4smU&callback=initMap" type="text/javascript"></script>
{% endblock %}
<!--API KEY: AIzaSyCh5hquqnIYsTyfmzkJds-warsV1FJ4smU 

second: AIzaSyCh5hquqnIYsTyfmzkJds-warsV1FJ4smU

-->
